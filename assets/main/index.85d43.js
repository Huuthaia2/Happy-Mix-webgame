window.__require=function t(e,n,o){function i(r,a){if(!n[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var u=n[r]={exports:{}};e[r][0].call(u.exports,function(t){return i(e[r][1][t]||t)},u,u.exports,t,e,n,o)}return n[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<o.length;r++)i(o[r]);return i}({AdSdk:[function(t,e,n){"use strict";cc._RF.push(e,"dda8fejs/RHvaJ8/J5l3Spw","AdSdk"),Object.defineProperty(n,"__esModule",{value:!0}),n.adSdk=n.AdSdk=n.PlatformType=n.PlatformInfo=void 0;var o,i,s=t("../Confg/GameConfig"),r=t("../Confg/Lanuage"),a=(t("../Confg/UserMgr"),t("./BpSdk")),c=t("./GoogleSdk"),l=t("./WebSdk2"),u=t("./WySdk"),d=t("./WyySdk");(function(t){t.web="web",t.qq="qq",t.vivo="vivo",t.oppo="oppo",t.wx="wx",t.tt="tt",t.bp="bp",t.apk="apk",t.webtest="webtest",t.bptest="bptest",t.wyy="wyy",t.weiyou="weiyou"})(o=n.PlatformInfo||(n.PlatformInfo={})),function(t){t.us="us",t.web="web",t.apk="apk",t.wyy="wyy",t.weiyou="weiyou"}(i=n.PlatformType||(n.PlatformType={}));var h=function(){function t(){switch(this.platform=o.weiyou,this.platformType=i.us,this.platformApk=!1,this._platform=null,this.platform){case o.bp:case o.bptest:this._platform=new a.BpSdk,this.platformType=i.us,r.default.GetInstance().currentCy=r.Country.US;break;case o.apk:this._platform=new c.GoogleSdk,this.platformType=i.apk,r.default.GetInstance().currentCy=r.Country.US,this.platformApk=!0;break;case o.webtest:this._platform=new l.WebSdk2,this.platformType=i.us,r.default.GetInstance().currentCy=r.Country.US;break;case o.wyy:this._platform=new d.WyySdk,this.platformType=i.wyy,r.default.GetInstance().currentCy=r.Country.CN;break;case o.weiyou:this._platform=new u.WySdk,this.platformType=i.weiyou,r.default.GetInstance().currentCy=r.Country.US;break;default:this._platform=new l.WebSdk2,this.platformType=i.web,r.default.GetInstance().currentCy=r.Country.CN}this._platform.initConfig()}return Object.defineProperty(t.prototype,"Platform",{get:function(){return this._platform},enumerable:!1,configurable:!0}),t.prototype.getLanControl=function(){return r.default.GetInstance().currentCy==r.Country.CN?1:0},t.prototype.addWyySet=function(){window.yyygame&&window.yyygame.init({appId:"a30102000000000001bf763a39211dac",ext:""}).then(function(t){console.log(t)})},t.prototype.addScript=function(t){var e=document.getElementById("gameClient");e&&(console.warn("\u5df2\u7ecf\u5b58\u5728\u5916\u90e8\u4ee3\u7801\uff0c\u5148\u5220\u9664"),document.body.removeChild(e));var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("id","gameClient"),n.text=t;try{document.body.appendChild(n)}catch(o){return console.error(o),!1}return!0},t.prototype.sendLog=function(){this.sendCount()},t.prototype.getGameStatus=function(){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==t.readyState&&t.status>=200&&t.status<400){var e=t.responseText;console.log(e,"xxxx");var n=JSON.parse(e);n&&n.length>0&&(s.default.closeGame=n[0].open)}},t.open("GET","https://www.luozhiming.shop:30001/set/query?channel=water_"+this.platformType,!0),t.send()},t.prototype.setRank=function(){},t.prototype.sendCount=function(){var t=new Date,e=0,n=t.getDate()+"-"+t.getDay(),o=cc.sys.localStorage.getItem("lastNow_water_weiyou"),i=cc.sys.localStorage.getItem("firstNow_dog_water_weiyou"+this.platform),s=0;n!=o&&(cc.sys.localStorage.setItem("lastNow_water_weiyou",n),s=1),i||(e=1),cc.sys.localStorage.setItem("firstNow_dog_water_weiyou"+this.platform,"1");var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState&&r.status>=200&&r.status<400){var t=r.responseText;console.log(t)}},r.open("GET","https://www.luozhiming.shop:30001/game/count?channel=water_"+this.platformType+"&dailyCount="+s+"&newCount="+e,!0),r.send()},t.prototype.sendVideoOk=function(){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==t.readyState&&t.status>=200&&t.status<400){var e=t.responseText;console.log(e)}},t.open("GET","https://www.luozhiming.shop:30001/game/video?channel=water_"+this.platformType,!0),t.send()},t}();n.AdSdk=h,n.adSdk=new h,window.adSdk=n.adSdk,cc._RF.pop()},{"../Confg/GameConfig":"GameConfig","../Confg/Lanuage":"Lanuage","../Confg/UserMgr":"UserMgr","./BpSdk":"BpSdk","./GoogleSdk":"GoogleSdk","./WebSdk2":"WebSdk2","./WySdk":"WySdk","./WyySdk":"WyySdk"}],BpSdk:[function(t,e,n){"use strict";cc._RF.push(e,"e0e1dKN7SFJK6AiEFhEyRE7","BpSdk"),Object.defineProperty(n,"__esModule",{value:!0}),n.BpSdk=n.CallbackForAd=void 0;var o=t("../Confg/GameConfig"),i=t("./AdSdk");n.CallbackForAd={video:null};var s=function(){function t(){this.suc=null,this.fail=null,this.bpCloseInit=!1,this.callback=null}return t.prototype.initConfig=function(){var t=this;window.videoResult=function(e){e&&e.isEnded?(console.log("\u6b63\u5e38\u64ad\u653e\u7ed3\u675f\uff0c\u4e0b\u53d1\u6e38\u620f\u5956\u52b1"),o.default.showToast("Congratulations Get Reward"),t.suc&&t.suc()):(o.default.showToast("\u89c2\u770b\u5b8c\u89c6\u9891\u7ed9\u5956\u52b1"),t.fail&&t.fail(),console.log("\u64ad\u653e\u4e2d\u9014\u9000\u51fa\uff0c\u4e0d\u4e0b\u53d1\u6e38\u620f\u5956\u52b1")),t.suc&&e&&e.isEnded&&i.adSdk.sendVideoOk(),t.suc=null,t.fail=null}},t.prototype.showBlockAd=function(){},t.prototype.showVideoAd=function(t,e){this.suc=t,this.fail=e,window.bp?(window.bp.rewardedVideoAd.onClose(function(t){window.videoResult&&window.videoResult(t)}),window.bp.rewardedVideoAd.show().then(function(t){console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u5c55\u793a\u6210\u529f",JSON.stringify(t))}).catch(function(t){o.default.showToast("No Ads"),console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u5c55\u793a\u5931\u8d25",JSON.stringify(t))})):(e&&e(),o.default.showToast("\u6ca1\u6709\u5e7f\u544a"))},t.prototype.showGameBoxAd=function(){},t.prototype.loadGameBoxAd=function(){return null},t.prototype.showBannerAd=function(){},t.prototype.showInterAd=function(){window.bp&&window.bp.interstitialAd.show().then(function(t){console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u6210\u529f",JSON.stringify(t))}).catch(function(t){console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25",JSON.stringify(t))})},t.prototype.hideBlockAd=function(){},t.prototype.showWindow=function(){},t.prototype.hideBannerAd=function(){},t.prototype.refresh=function(){},t.prototype.showTalk=function(){},t}();n.BpSdk=s,cc._RF.pop()},{"../Confg/GameConfig":"GameConfig","./AdSdk":"AdSdk"}],CSdk:[function(t,e,n){"use strict";cc._RF.push(e,"dd475CF9VhJv57sASEEqQVi","CSdk"),Object.defineProperty(n,"__esModule",{value:!0}),n.EventType=void 0,function(t){t.LOAD_FUI_COMPLETE="LOAD_FUI_COMPLETE",t.LOAD_FUI_SINGLE="LOAD_FUI_SINGLE",t.LOAD_SUCCESS="LOAD_SUCCESS",t.START_SCENE="START_SCENE"}(n.EventType||(n.EventType={}));var o=function(){function t(){this.panel=[],this.scene=[],this.currentShow=[],this.currentScene=null}return t.GetInstance=function(){return this.inst||(this.inst=new t),this.inst},t.prototype.showPanel=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];for(var i=0,s=null;i<this.panel.length;i++)if(this.panel[i].$className===e){s=this.panel[i];break}i>=this.panel.length&&((s=new t).$className=e,console.log("new:",e),this.panel.push(s)),s.openData=n,s.showAnimation(),0==s.times&&(s.bindChild(),s.times++),s.refreshUi(),this.mask&&this.mask.removeFromParent(),this.mask=fgui.UIPackage.createObject("Main","mask").asCom,this.mask.on(cc.Node.EventType.TOUCH_MOVE,function(){},this),this.mask.on(cc.Node.EventType.TOUCH_START,function(){},this),this.mask.on(cc.Node.EventType.TOUCH_END,function(){},this),this.mask.makeFullScreen(),fgui.GRoot.inst.addChild(this.mask),this.mask.visible=!0,fgui.GRoot.inst.addChild(s.win),s.win.makeFullScreen()},t.prototype.hidePanel=function(){for(var t=this.panel.length-1;t>=0;t--)try{this.mask&&this.mask.removeFromParent(),this.panel[t]&&this.panel[t].win&&(this.panel[t].win.removeFromParent(),this.panel[t].win.hide())}catch(e){}},t.prototype.showScene=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];console.log("22222222");for(var i=0,s=null;i<this.scene.length;i++)this.scene[i].$className==e&&(s=this.scene[i]);s||(console.log("new Classs",e),(s=new t).$className=e,this.scene.push(s)),s.openData=n,0==s.times&&(s.bindChild(),s.times++),this.currentScene&&(this.currentScene.onClose(),this.currentScene.win.removeFromParent()),fgui.GRoot.inst.addChild(s.win),s.win.makeFullScreen(),s.refreshUi(),this.currentScene=s},t.prototype.hideScene=function(){this.currentScene.win.removeFromParent(),this.currentScene.onClose(),fgui.GRoot.inst.removeChildren()},t.inst=null,t}();n.default=o,cc._RF.pop()},{}],Fgui:[function(t,e,n){"use strict";cc._RF.push(e,"5ef6dVNRmNCD5K3VYminsOB","Fgui"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./AdSdk/AdSdk"),i=t("./Confg/GameConfig"),s=t("./Confg/SoundMgr"),r=t("./Scene/LoadingScene"),a=t("./sdk/CSdk"),c=t("./sdk/ResItem"),l=t("./sdk/ResMgr"),u=function(){function t(){}return t.GetInstance=function(){return this.inst||(this.inst=new t),this.inst},t.prototype.init=function(){var t=this;fgui.GRoot.create(),(new l.default).loadPackageByQueue(new c.default("Load").setRemoteUrl("fgui/"),new c.default("Main").setRemoteUrl("fgui/")),mvc.on(a.EventType.LOAD_FUI_COMPLETE,this,function(){}),mvc.on(a.EventType.LOAD_FUI_SINGLE,this,function(e){"Load"==e&&t.openScene()}),mvc.on("BTN_CLICK",this,this.play),window.GameConfig_v=i.default,window.SoundMgr_v=s.SoundMgr.getInstance(),o.adSdk.sendLog()},t.prototype.play=function(){s.SoundMgr.getInstance().playSound(s.SoundType.CLICK)},t.prototype.openScene=function(){a.default.GetInstance().showScene(r.default,"Load")},t.inst=null,t}();n.default=u,window.Fgui=u.GetInstance(),cc._RF.pop()},{"./AdSdk/AdSdk":"AdSdk","./Confg/GameConfig":"GameConfig","./Confg/SoundMgr":"SoundMgr","./Scene/LoadingScene":"LoadingScene","./sdk/CSdk":"CSdk","./sdk/ResItem":"ResItem","./sdk/ResMgr":"ResMgr"}],GameConfig:[function(t,e,n){"use strict";cc._RF.push(e,"14b2cdRZIhFxZAaUVCRzpEy","GameConfig"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Lanuage"),i=function(){function t(){}return t.showToast=function(t){var e=this;t=o.default.GetInstance().getText(t),this.toast||(this.toast=fgui.UIPackage.createObject("Main","toast").asLabel),this.tween&&this.tween.stop(),this.toast.title=t,this.toast.x=fgui.GRoot.inst.width/2,this.toast.y=fgui.GRoot.inst.height/2+200,fgui.GRoot.inst.addChild(this.toast),this.toast.alpha=1,cc.tween(this.toast).to(1.2,{y:this.toast.y-400,alpha:0}).call(function(){e.toast.removeFromParent()}).start()},t.cupMgr=null,t.gameTip=[["\u70b9\u51fb\u8fd9\u4e2a\u74f6\u5b50","\u70b9\u51fb\u8fd9\u4e2a\u74f6\u5b50\u5012\u6c34\u8fdb\u6765"],["\u53ea\u6709\u5012\u5728\u76f8\u540c\u989c\u8272\u7684\u6c34\u4e4b\u4e0a"]],t.step=0,t.cupIndex=0,t.closeGame=0,t}();n.default=i,cc._RF.pop()},{"./Lanuage":"Lanuage"}],GameScene:[function(t,e,n){"use strict";cc._RF.push(e,"a1f6e1G+L1I7rAcQzKMDs3B","GameScene");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s=t("../AdSdk/AdSdk"),r=t("../Confg/GameConfig"),a=t("../Confg/Lanuage"),c=t("../Confg/UserMgr"),l=t("../Panel/PowerPanel"),u=t("../Panel/WinPanel"),d=t("../sdk/CSdk"),h=t("../sdk/Scene"),p=t("./HomeScene"),f=function(t){function e(){return t.call(this,"Main","Game")||this}return i(e,t),e.prototype.bindChild=function(){this.text_level=this.getText("level"),this.btn_back=this.getButton("btn_back"),this.btn_add=this.getButton("btn_add"),this.btn_addP=this.getButton("btn_addP"),this.btn_restart=this.getButton("btn_restart"),this.btn_home=this.getButton("btn_home"),this.btn_jump=this.getButton("n13.btn_power"),this.level_input=this.getComponent("n13.n13").asTextInput,this.node_cup=this.getComponent("node"),this.label_tip=this.getLabel("gameTip"),this.power_label=this.getText("n12"),r.default.cupMgr.node.on("level_finish",this.onFinishOneLevel,this),r.default.cupMgr.node.on("do_pour",this.onPourAction,this),mvc.on("LEVEL_UPDATE",this,this.updateLevel),mvc.on("PROP_UPDATE",this,this.onRefresh),mvc.on("POWER_UPDATE",this,this.refreshPower),mvc.on("UPDATE_NEXT",this,this.updateInfo)},e.prototype.refreshUi=function(){r.default.cupMgr.node.removeFromParent(),this.node_cup.displayListContainer.addChild(r.default.cupMgr.node),r.default.cupMgr.onInit(),this.btn_restart.title=a.default.GetInstance().getText("\u91cd\u65b0\u5f00\u59cb"),this.btn_back.title=a.default.GetInstance().getText("\u540e\u9000\u4e00\u6b65"),this.btn_add.title=a.default.GetInstance().getText("\u589e\u52a0\u7a7a\u676f"),this.onRefresh(),this.updateLevel(),this.level_input.text="",this.win.getController("isDebug").selectedIndex=s.adSdk.platform==s.PlatformInfo.bptest?1:0},e.prototype.refreshPower=function(){var t=c.default.GetInstance().user,e=t.power,n=t.maxPower;t.level,this.power_label.text=e+"/"+n},e.prototype.updateInfo=function(){var t=c.default.GetInstance().user.level;this.label_tip.visible=t<=2,t>2||(console.log("Step::::",r.default.step),2==t?(r.default.cupIndex=[0,1,0,2][r.default.step],this.label_tip.title=a.default.GetInstance().getText(""+r.default.gameTip[1][0])):(0==r.default.step?r.default.cupIndex=1:r.default.cupIndex=0,this.label_tip.title=a.default.GetInstance().getText(""+r.default.gameTip[0][r.default.step])),r.default.cupMgr.showFinger(r.default.cupIndex))},e.prototype.updateLevel=function(){var t=c.default.GetInstance().user.level;console.log("level\uff1a",t),this.text_level.text=""+a.default.GetInstance().getNumText("\u7b2c \u5173",t),r.default.step=0,this.updateInfo(),this.refreshPower()},e.prototype.onFinishOneLevel=function(){console.log("Show Winner"),d.default.GetInstance().showPanel(u.default,"Win")},e.prototype.onPourAction=function(){},e.prototype.onRefresh=function(){console.log("1111");var t=c.default.GetInstance().user;this.getLabel("label_back").title="x"+t.backProp,this.getLabel("label_add").title="x"+t.addProp,this.getLabel("label_back").getController("c2").selectedIndex=t.backProp<=0?1:0,this.getLabel("label_add").getController("c2").selectedIndex=t.addProp<=0?1:0},e.prototype.createCups=function(){},e.prototype.onClose=function(){},e.prototype.onClickButton=function(t){var e=this;switch(t){case this.btn_jump:if(!r.default.cupMgr.isWaterOk())return;if(this.level_input.text>r.default.cupMgr.levelCfg.json.length)return void r.default.showToast("\u8d85\u51fa\u5173\u5361");c.default.GetInstance().user.level=+this.level_input.text,r.default.cupMgr.nextLevel(),mvc.emit("LEVEL_UPDATE");break;case this.btn_addP:d.default.GetInstance().showPanel(l.default,"Power");break;case this.btn_home:d.default.GetInstance().showScene(p.default,"Home");break;case this.btn_add:if(c.default.GetInstance().user.level<=2)return;if(!r.default.cupMgr.isWaterOk())return;if(r.default.cupMgr.isAddCup)return void r.default.showToast("\u53ea\u80fd\u589e\u52a0\u4e00\u4e2a\u7a7a\u676f");c.default.GetInstance().user.addProp>0?(c.default.GetInstance().addAddProp(-1),r.default.cupMgr.addEmptyCup(),this.onRefresh()):s.adSdk.Platform.showVideoAd(function(){c.default.GetInstance().addAddProp(1),e.onRefresh()},function(){});break;case this.btn_back:if(c.default.GetInstance().user.level<=2)return;if(!r.default.cupMgr.isWaterOk())return;c.default.GetInstance().user.backProp>0?r.default.cupMgr.undoAction()?(c.default.GetInstance().addBackProp(-1),this.onRefresh()):r.default.showToast("\u5df2\u7ecf\u662f\u521d\u59cb\u72b6\u6001"):s.adSdk.Platform.showVideoAd(function(){c.default.GetInstance().addBackProp(1),e.onRefresh()},function(){});break;case this.btn_restart:if(c.default.GetInstance().user.level<=2)return;r.default.cupMgr.nextLevel()}},e}(h.default);n.default=f,cc._RF.pop()},{"../AdSdk/AdSdk":"AdSdk","../Confg/GameConfig":"GameConfig","../Confg/Lanuage":"Lanuage","../Confg/UserMgr":"UserMgr","../Panel/PowerPanel":"PowerPanel","../Panel/WinPanel":"WinPanel","../sdk/CSdk":"CSdk","../sdk/Scene":"Scene","./HomeScene":"HomeScene"}],GoogleSdk:[function(t,e,n){"use strict";cc._RF.push(e,"f0dccQBYXNMRJ1d0a5q6z1N","GoogleSdk"),Object.defineProperty(n,"__esModule",{value:!0}),n.GoogleSdk=n.CallbackForAd=void 0;var o=t("../Confg/GameConfig");n.CallbackForAd={video:null};var i=function(){function t(){this.suc=null,this.fail=null,this.bpClick=!1,this.callback=null}return t.prototype.initConfig=function(){var t=this;window.getVideoSuccess=function(){t.suc&&t.suc(),t.sendVideoOk(),t.suc=null,t.fail=null},window.getVideoFalse=function(e){1==e||"1"==e?o.default.showToast("No Ads\uff01"):o.default.showToast("Get Reward By Watch Video Completed!"),t.fail&&t.fail(),t.suc=null,t.fail=null}},t.prototype.showBlockAd=function(){},t.prototype.showVideoAd=function(t,e){this.suc=t,this.fail=e,window.jsb?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AdManager","showVideo","()V"):(this.callback=t,this.callback&&this.callback())},t.prototype.sendVideoOk=function(){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==t.readyState&&t.status>=200&&t.status<400){var e=t.responseText;console.log(e)}},t.open("GET","http://42.192.210.128:3309/game/video?channel=water_apk",!0),t.send()},t.prototype.showGameBoxAd=function(){},t.prototype.loadGameBoxAd=function(){return null},t.prototype.showBannerAd=function(){},t.prototype.showInterAd=function(){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AdManager","showInter","()V")},t.prototype.hideBlockAd=function(){},t.prototype.showWindow=function(){},t.prototype.hideBannerAd=function(){},t.prototype.refresh=function(){},t.prototype.showTalk=function(){},t}();n.GoogleSdk=i,cc._RF.pop()},{"../Confg/GameConfig":"GameConfig"}],HomeScene:[function(t,e,n){"use strict";cc._RF.push(e,"69147kEx9VEQIL5zR/bvLoy","HomeScene");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s=t("../AdSdk/AdSdk"),r=t("../Confg/Lanuage"),a=t("../Confg/UserMgr"),c=t("../Panel/PowerPanel"),l=t("../Panel/RankPanel"),u=t("../Panel/SetPanel"),d=t("../Panel/SignPanel"),h=t("../sdk/CSdk"),p=t("../sdk/Scene"),f=t("./GameScene"),g=function(t){function e(){var e=t.call(this,"Main","Home")||this;return e.isRunning=!1,e}return i(e,t),e.prototype.bindChild=function(){this.text_power=this.getText("n3"),this.btn_start=this.getButton("btn_start"),this.btn_rank=this.getButton("btn_rank"),this.btn_add=this.getButton("btn_add"),this.btn_power=this.getButton("btn_power"),this.btn_sign=this.getButton("btn_sign"),this.btn_set=this.getButton("btn_set"),mvc.on("POWER_UPDATE",this,this.updatePower)},e.prototype.refreshUi=function(){var t=a.default.GetInstance().user,e=t.power,n=t.maxPower,o=t.level;this.win.getController("lan").selectedIndex=s.adSdk.getLanControl(),this.text_power.text=e+"/"+n,this.isRunning=!1,this.btn_sign.title=""+r.default.GetInstance().getText("\u7b7e  \u5230"),this.btn_rank.title=""+r.default.GetInstance().getText("\u6392  \u884c"),this.btn_start.title=""+r.default.GetInstance().getText("\u5f00\u59cb\u6e38\u620f"),this.getText("btn_start.n13").text=""+r.default.GetInstance().getNumText("\u7b2c\u5173",o),this.btn_start.getChild("n15").alpha=0,this.btn_start.getChild("n16").alpha=0,this.btn_rank.visible=!1},e.prototype.updatePower=function(){var t=a.default.GetInstance().user,e=t.power,n=t.maxPower;t.level,this.text_power.text=e+"/"+n},e.prototype.onClickButton=function(t){var e=this;if(!this.isRunning)switch(t){case this.btn_start:a.default.GetInstance().user.power<2?h.default.GetInstance().showPanel(c.default,"Power"):(a.default.GetInstance().addPower(-2),this.isRunning=!0,a.default.GetInstance().user.level<=5?h.default.GetInstance().showScene(f.default,"Game"):this.btn_start.getTransition("t0").play(function(){e.isRunning=!1,h.default.GetInstance().showScene(f.default,"Game")},1));break;case this.btn_add:case this.btn_power:h.default.GetInstance().showPanel(c.default,"Power");break;case this.btn_rank:h.default.GetInstance().showPanel(l.default,"Rank");break;case this.btn_sign:h.default.GetInstance().showPanel(d.default,"Sign");break;case this.btn_set:h.default.GetInstance().showPanel(u.default,"Set")}},e}(p.default);n.default=g,cc._RF.pop()},{"../AdSdk/AdSdk":"AdSdk","../Confg/Lanuage":"Lanuage","../Confg/UserMgr":"UserMgr","../Panel/PowerPanel":"PowerPanel","../Panel/RankPanel":"RankPanel","../Panel/SetPanel":"SetPanel","../Panel/SignPanel":"SignPanel","../sdk/CSdk":"CSdk","../sdk/Scene":"Scene","./GameScene":"GameScene"}],IPlatform:[function(t,e,n){"use strict";cc._RF.push(e,"7de7dC/IsdBlaQt/T0txmmp","IPlatform"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],Lanuage:[function(t,e,n){"use strict";var o;cc._RF.push(e,"05eb8mcwl1HP7yyFGvorJnM","Lanuage"),Object.defineProperty(n,"__esModule",{value:!0}),n.LanuageDatas=n.Country=void 0,function(t){t[t.CN=0]="CN",t[t.US=1]="US"}(o=n.Country||(n.Country={})),n.LanuageDatas={"\u52a0\u8f7d\u4e2d":["\u52a0\u8f7d\u4e2d","Loading"],"\u7b2c\u5173":["\u7b2c{0}\u5173","Stage{0}"],"\u6e38\u620f\u80dc\u5229":["\u6e38\u620f\u80dc\u5229","Successful"],"\u4f53\u529b\u4e0d\u8db3":["\u4f53\u529b\u4e0d\u8db3","Not Power"],"\u7b2c \u5173":["\u7b2c{0}\u5173","Stage {0}"],"\u6b63\u5728\u5012\u6c34!":["\u6b63\u5728\u5012\u6c34!","It's doing!"],"\u666e\u901a\u7528\u6237":["\u666e\u901a\u7528\u6237","User"],"\u5173":["{0}\u5173","Stage {0}"],"\u6bcf\u65e5\u7b7e\u5230":["\u6bcf\u65e5\u7b7e\u5230","Daily\ncheck-in"],"\u9886\u4f53\u529b":["\u9886\u4f53\u529b","Get Power"],"\u7b7e  \u5230":["\u7b7e  \u5230","Check-in"],"\u7b2c\u5929":["\u7b2c {0} \u5929","Day {0}"],"\u672a\u4e0a\u699c":["\u672a\u4e0a\u699c","No ranking"],"\u589e\u52a0\u7a7a\u676f":["\u589e\u52a0\u7a7a\u676f","add empty tube"],"\u91cd\u65b0\u5f00\u59cb":["\u91cd\u65b0\u5f00\u59cb","restart"],"\u540e\u9000\u4e00\u6b65":["\u540e\u9000\u4e00\u6b65","go back"],"\u6392\u884c\u699c":["\u6392\u884c\u699c","Qualifying"],"\u6392  \u884c":["\u6392  \u884c","Ranking"],"\u5f00\u59cb\u6e38\u620f":["\u5f00\u59cb\u6e38\u620f","START"],"\u76ae\u80a4":["\u76ae\u80a4","Themes"],"\u6c34\u676f\u5df2\u7ecf\u6ee1\u4e86":["\u6c34\u676f\u5df2\u7ecf\u6ee1\u4e86","The tube is already full"],"\u989c\u8272\u76f8\u540c\u624d\u80fd\u5012\u5165":["\u989c\u8272\u76f8\u540c\u624d\u80fd\u5012\u5165","Only the same colours can be added"],"\u8bbe\u7f6e":["\u8bbe\u7f6e","Settings"],"\u97f3\u6548":["\u97f3\u6548","Sound"],"\u9707\u52a8":["\u9707\u52a8","Vibrate"],"\u8865\u5145\u4f53\u529b":["\u8865\u5145\u4f53\u529b","Regain Strength"],"\u4e0d,\u8c22\u8c22":["\u4e0d,\u8c22\u8c22","No,Thanks"],"\u9886\u53d6":["\u9886\u53d6","GET"],"\u53cc\u500d\u9886\u53d6":["\u53cc\u500d\u9886\u53d6","DOUBLE GET"],"\u4e0b\u4e00\u5173":["\u4e0b\u4e00\u5173","Next Level"],"\u53ea\u80fd\u589e\u52a0\u4e00\u4e2a\u7a7a\u676f":["\u53ea\u80fd\u589e\u52a0\u4e00\u4e2a\u7a7a\u676f","Only one cup can be added\uff01"],"\u5df2\u7ecf\u662f\u521d\u59cb\u72b6\u6001":["\u5df2\u7ecf\u662f\u521d\u59cb\u72b6\u6001","already in the initial state"],"\u6ca1\u6709\u5e7f\u544a":["\u6ca1\u6709\u5e7f\u544a","No Ads!"],"\u89c2\u770b\u5b8c\u89c6\u9891\u7ed9\u5956\u52b1":["\u89c2\u770b\u5b8c\u89c6\u9891\u7ed9\u5956\u52b1","Reward after watching the video"],"\u70b9\u51fb\u8fd9\u4e2a\u74f6\u5b50":["\u70b9\u51fb\u8fd9\u4e2a\u74f6\u5b50","Click on this bottle"],"\u70b9\u51fb\u8fd9\u4e2a\u74f6\u5b50\u5012\u6c34\u8fdb\u6765":["\u70b9\u51fb\u8fd9\u4e2a\u74f6\u5b50\u5012\u6c34\u8fdb\u6765","Click on this bottle to pour water in"],"\u53ea\u6709\u5012\u5728\u76f8\u540c\u989c\u8272\u7684\u6c34\u4e4b\u4e0a":["\u53ea\u6709\u5012\u5728\u76f8\u540c\u989c\u8272\u7684\u6c34\u4e4b\u4e0a","Only poured over water of the same color"]};var i=function(){function t(){this.currentCy=o.US}return t.GetInstance=function(){return this.inst||(this.inst=new t),this.inst},t.prototype.getText=function(t){return console.log(n.LanuageDatas[t]),n.LanuageDatas[t]?n.LanuageDatas[t][this.currentCy]||n.LanuageDatas[t][0]:t},t.prototype.getNumText=function(t,e){if(n.LanuageDatas[t]){var o=n.LanuageDatas[t][this.currentCy]||n.LanuageDatas[t][0];return o.replace(new RegExp(/\{0\}/),e)}return t},t.inst=null,t}();n.default=i,cc._RF.pop()},{}],LoadingScene:[function(t,e,n){"use strict";cc._RF.push(e,"05068AirqNLLrTPpGRr32r/","LoadingScene");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s=t("../AdSdk/AdSdk"),r=t("../Confg/GameConfig"),a=t("../Confg/Lanuage"),c=t("../sdk/CSdk"),l=t("../sdk/Scene"),u=t("./HomeScene"),d=function(t){function e(){var e=t.call(this,"Load","Loading")||this;return e._loadingValue=0,e._needResNum=0,e.timerPlayer=null,e.complete=!1,e}return i(e,t),e.prototype.bindChild=function(){var t=this;this._loadingBar=this.getComponent("progressbar").asProgress,mvc.on(c.EventType.LOAD_FUI_COMPLETE,this,function(){t.complete=!0}),mvc.on("BTN_CLICK",this,function(){})},e.prototype.refreshUi=function(){var t=this;this.getText("desc").visible=s.adSdk.platformType==s.PlatformType.wyy,this.win.getController("c1").selectedIndex=s.adSdk.getLanControl(),this.getText("n3").text=a.default.GetInstance().getText("\u52a0\u8f7d\u4e2d")+"....",this.init(),this._needResNum=0,this.timerPlayer=setInterval(function(){t.onRefresh()},16),s.adSdk.platform==s.PlatformInfo.wyy&&s.adSdk.addWyySet()},e.prototype.init=function(){this._loadingValue=0},e.prototype.onRefresh=function(){this.win.makeFullScreen(),this._loadingValue>=99?(this._loadingValue+=0,this.onComplete()):this._loadingValue+=1,this._loadingBar.value=this._loadingValue},e.prototype.onComplete=function(){this.complete&&(this.timerPlayer&&clearInterval(this.timerPlayer),0==r.default.closeGame&&c.default.GetInstance().showScene(u.default,"Home"))},e}(l.default);n.default=d,cc._RF.pop()},{"../AdSdk/AdSdk":"AdSdk","../Confg/GameConfig":"GameConfig","../Confg/Lanuage":"Lanuage","../sdk/CSdk":"CSdk","../sdk/Scene":"Scene","./HomeScene":"HomeScene"}],Panel:[function(t,e,n){"use strict";cc._RF.push(e,"d0d801s9u9AcKNhhAtIzROx","Panel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=t.apply(this,e)||this;return o.win.setPivot(.5,.5),o}return i(e,t),e.prototype.showAnimation=function(){this.win.setScale(0,0),cc.tween(this.win).to(.2,{scaleX:1,scaleY:1}).start()},e.prototype.hideAnimation=function(t){void 0===t&&(t=null),cc.tween(this.win).to(.1,{scaleX:0,scaleY:0}).call(function(){t&&t()}).start()},e}(t("./Scene").default);n.default=s,cc._RF.pop()},{"./Scene":"Scene"}],PowerPanel:[function(t,e,n){"use strict";cc._RF.push(e,"de9e0x9h5ZDPqtypwngJYcD","PowerPanel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s=t("../AdSdk/AdSdk"),r=t("../Confg/Lanuage"),a=t("../Confg/UserMgr"),c=t("../sdk/CSdk"),l=function(t){function e(){return t.call(this,"Main","Power")||this}return i(e,t),e.prototype.bindChild=function(){this.text_title=this.getText("n1"),this.btn_power=this.getButton("btn_power"),this.btn_close=this.getButton("btn_close")},e.prototype.refreshUi=function(){this.text_title.text=r.default.GetInstance().getText("\u8865\u5145\u4f53\u529b"),this.btn_power.text=r.default.GetInstance().getText("\u9886\u4f53\u529b"),this.getText("btn_close.text").text=r.default.GetInstance().getText("\u4e0d,\u8c22\u8c22"),s.adSdk.Platform.showBannerAd()},e.prototype.onClickButton=function(t){var e=this;switch(t){case this.btn_power:s.adSdk.Platform.showVideoAd(function(){a.default.GetInstance().addPower(5),e.close()},function(){});break;case this.btn_close:this.close()}},e.prototype.close=function(){s.adSdk.Platform.hideBannerAd(),c.default.GetInstance().hidePanel(this)},e}(t("../sdk/Panel").default);n.default=l,cc._RF.pop()},{"../AdSdk/AdSdk":"AdSdk","../Confg/Lanuage":"Lanuage","../Confg/UserMgr":"UserMgr","../sdk/CSdk":"CSdk","../sdk/Panel":"Panel"}],RankPanel:[function(t,e,n){"use strict";cc._RF.push(e,"e29e9Oe+RhCfqDf1ezR8ni4","RankPanel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s=t("../AdSdk/AdSdk"),r=t("../Confg/Lanuage"),a=t("../Confg/UserMgr"),c=t("../sdk/CSdk"),l=function(t){function e(){return t.call(this,"Main","Rank")||this}return i(e,t),e.prototype.bindChild=function(){this.btn_close=this.getButton("btn_close"),this.text_title=this.getText("n3"),this.label_my=this.getLabel("myself")},e.prototype.refreshUi=function(){var t=this;this.text_title.text=r.default.GetInstance().getText("\u6392\u884c\u699c"),this.label_my.getChild("name").text=a.default.GetInstance().user.userName,this.label_my.getChild("level").text=r.default.GetInstance().getNumText("\u5173",a.default.GetInstance().user.level),s.adSdk.getRankInfo(function(e){t.updateInfo(e)})},e.prototype.addOk=function(t){for(var e=-1,n=this.getList("n5"),o=0;o<t.length;o++){var i=n.getChildAt(o).asLabel;i.$isLoaded||(i.$isLoaded=!0,i.getController("type").selectedIndex=o%2),i.getChild("name").text=t[o].name,i.getChild("level").text=r.default.GetInstance().getNumText("\u5173",t[o].grade),i.getController("c1").selectedIndex=o<=2?o:3,i.getChild("rank").text=""+(o+1),t[o].name==a.default.GetInstance().user.userName&&(e=o)}-1==e?(this.label_my.getController("c1").selectedIndex=4,this.label_my.getChild("rank2").text=r.default.GetInstance().getText("\u672a\u4e0a\u699c")):(this.label_my.getController("c1").selectedIndex=e<=2?e:3,this.label_my.getChild("rank").text=""+(e+1))},e.prototype.updateInfo=function(t){var e=this,n=this.getList("n5");if(n.numChildren<t.length)for(var o=t.length-n.numChildren,i=function(i){var s=i,r=fgui.UIPackage.createObject("Main","rank_item").asLabel;setTimeout(function(){n.addChild(r),s>=o-1&&e.addOk(t)},16*Math.floor(i/20))},s=0;s<o;s++)i(s)},e.prototype.onClickButton=function(t){switch(t){case this.btn_close:c.default.GetInstance().hidePanel(this)}},e}(t("../sdk/Panel").default);n.default=l,cc._RF.pop()},{"../AdSdk/AdSdk":"AdSdk","../Confg/Lanuage":"Lanuage","../Confg/UserMgr":"UserMgr","../sdk/CSdk":"CSdk","../sdk/Panel":"Panel"}],ResItem:[function(t,e,n){"use strict";cc._RF.push(e,"ac78dIoGkFAG4NLih2YCXKi","ResItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t){this.url="res",this.resName="",this.url="res",this.resName="",this.resName=t}return t.prototype.setRemoteUrl=function(t){return this.url=t,this},t.prototype.getAddress=function(){return""+this.url+this.resName},t}();n.default=o,cc._RF.pop()},{}],ResMgr:[function(t,e,n){"use strict";cc._RF.push(e,"e5f3eQ6zEpCzJWqV5Yc6CV7","ResMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./CSdk"),i=function(){function t(){this.loadRestimes=0,this.index=0,this.packages=[],this.loadRestimes=0,this.index=0,this.packages=null,mvc.on(o.EventType.LOAD_SUCCESS,this,this.loadSinglePackage)}return t.prototype.loadPackageByQueue=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.packages=t,this.loadSinglePackage(this.packages[this.index])},t.prototype.loadSinglePackage=function(t){var e=this;this.loadRestimes++,console.log("resAdress:",t.getAddress()),fgui.UIPackage.loadPackage(t.getAddress(),function(n){if(console.log("info:",n),fgui.UIPackage.addPackage(t.getAddress()))console.log("true"),mvc.emit(o.EventType.LOAD_FUI_SINGLE,t.resName),e.loadRestimes=0,e.index++;else if(console.log("false"),e.loadRestimes>=5)throw Error("\u52a0\u8f7d\u8d44\u6e90\u5931\u8d25,"+t.getAddress());e.index>=e.packages.length?mvc.emit(o.EventType.LOAD_FUI_COMPLETE):e.loadSinglePackage(e.packages[e.index])})},t}();n.default=i,cc._RF.pop()},{"./CSdk":"CSdk"}],Scene:[function(t,e,n){"use strict";cc._RF.push(e,"afe7eEneDZBeZIycz0X+tIj","Scene"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.times=0,this.openData=[],this.times=0,t.length>0){var n=t[0],o=t[1];this._win=fgui.UIPackage.createObject(n,o).asCom}}return Object.defineProperty(t.prototype,"win",{get:function(){return this._win},set:function(t){this._win=t},enumerable:!1,configurable:!0}),t.prototype.bindChild=function(){},t.prototype.refreshUi=function(){},t.prototype.hide=function(){},t.prototype.getButton=function(t,e){var n=this;void 0===e&&(e=null);var o=this.getNode(t,e).asButton;return o.onClick(function(){n.onClickButton(o),mvc.emit("BTN_CLICK")},this),o},t.prototype.getComponent=function(t,e){return void 0===e&&(e=null),this.getNode(t,e).asCom},t.prototype.getLabel=function(t,e){return void 0===e&&(e=null),this.getNode(t,e).asLabel},t.prototype.getText=function(t,e){return void 0===e&&(e=null),this.getNode(t,e).asTextField},t.prototype.getList=function(t,e){return void 0===e&&(e=null),this.getNode(t,e).asList},t.prototype.getLoader=function(t,e){return void 0===e&&(e=null),this.getNode(t,e).asLoader},t.prototype.getNode=function(t,e){void 0===e&&(e=null);for(var n=t.split("."),o=0,i=null==e?this._win:e;o<n.length;)null==(i=i.getChild(n[o]).asCom)&&console.error("\u52a0\u8f7d\u7ed3\u70b9\u5931\u8d25:::",t),o++;return i},t.prototype.onClickButton=function(){},t.prototype.onClose=function(){},t}();n.default=o,cc._RF.pop()},{}],SetPanel:[function(t,e,n){"use strict";cc._RF.push(e,"55424HqWUdBhpZj2+tLC17+","SetPanel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s=t("../AdSdk/AdSdk"),r=t("../Confg/Lanuage"),a=t("../Confg/UserMgr"),c=t("../sdk/CSdk"),l=function(t){function e(){return t.call(this,"Main","Set")||this}return i(e,t),e.prototype.bindChild=function(){this.text_title=this.getText("n8"),this.music_title=this.getText("n2"),this.virbate_title=this.getText("n3"),this.name_title=this.getText("name"),this.btn_music=this.getButton("btn_music"),this.btn_virbate=this.getButton("btn_virbate"),this.btn_close=this.getButton("btn_close")},e.prototype.refreshUi=function(){this.text_title.text=r.default.GetInstance().getText("\u8bbe\u7f6e"),this.music_title.text=r.default.GetInstance().getText("\u97f3\u6548"),this.virbate_title.text=r.default.GetInstance().getText("\u9707\u52a8"),this.name_title.text="Name: "+a.default.GetInstance().user.userName;var t=a.default.GetInstance().audio;this.btn_music.selected=1==t.music,this.btn_virbate.selected=1==t.virbate,s.adSdk.Platform.showBannerAd()},e.prototype.onClickButton=function(t){switch(t){case this.btn_music:a.default.GetInstance().setMusic(this.btn_music.selected?1:0);break;case this.btn_virbate:a.default.GetInstance().setVirbate(this.btn_music.selected?1:0);break;case this.btn_close:s.adSdk.Platform.hideBannerAd(),c.default.GetInstance().hidePanel(this)}},e}(t("../sdk/Panel").default);n.default=l,cc._RF.pop()},{"../AdSdk/AdSdk":"AdSdk","../Confg/Lanuage":"Lanuage","../Confg/UserMgr":"UserMgr","../sdk/CSdk":"CSdk","../sdk/Panel":"Panel"}],SignPanel:[function(t,e,n){"use strict";cc._RF.push(e,"72fbataGTlBW4/O1kMk4aeQ","SignPanel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s=t("../AdSdk/AdSdk"),r=t("../Confg/Lanuage"),a=t("../Confg/UserMgr"),c=t("../sdk/CSdk"),l=function(t){function e(){var e=t.call(this,"Main","Sign")||this;return e.signType=[[0,1],[1,1],[0,2],[0,3],[1,3],[1,5]],e}return i(e,t),e.prototype.bindChild=function(){this.btn_close=this.getButton("btn_close"),this.btn_sign=this.getButton("btn_sign"),this.btn_double=this.getButton("btn_double"),this.list_sign=this.getList("list_sign"),this.seven_item=this.getLabel("n9")},e.prototype.refreshUi=function(){this.getText("n6").text=r.default.GetInstance().getText("\u6bcf\u65e5\u7b7e\u5230"),this.btn_sign.title=r.default.GetInstance().getText("\u9886\u53d6"),this.btn_double.title=r.default.GetInstance().getText("\u53cc\u500d\u9886\u53d6"),this.initSign(),s.adSdk.Platform.showBannerAd()},e.prototype.initSign=function(){for(var t=a.default.GetInstance().user.sign,e=0;e<this.list_sign.numChildren;e++){var n=this.list_sign.getChildAt(e).asLabel;e<t.day?n.getController("signed").selectedIndex=1:e==t.day&&(n.getController("signed").selectedIndex=t.isSigned?1:0);var o=this.signType[e];n.getController("type").selectedIndex=o[0],n.getChild("n14").text="x"+o[1],n.title=""+r.default.GetInstance().getNumText("\u7b2c\u5929",e+1)}6==t.day&&(this.seven_item.getController("signed").selectedIndex=t.isSigned?1:0),this.seven_item.getChild("txt_1").text="x5",this.seven_item.getChild("txt_2").text="x5",this.seven_item.title=""+r.default.GetInstance().getNumText("\u7b2c\u5929",7),this.btn_sign.visible=this.btn_double.visible=!t.isSigned},e.prototype.onClickButton=function(t){var e=this;switch(t){case this.btn_sign:a.default.GetInstance().user.sign.isSigned||(this.getReward(1),a.default.GetInstance().sign(),s.adSdk.Platform.hideBannerAd(),c.default.GetInstance().hidePanel(this));break;case this.btn_double:a.default.GetInstance().user.sign.isSigned||s.adSdk.Platform.showVideoAd(function(){e.getReward(1),a.default.GetInstance().sign(),s.adSdk.Platform.hideBannerAd(),c.default.GetInstance().hidePanel(e)},function(){});break;case this.btn_close:s.adSdk.Platform.hideBannerAd(),c.default.GetInstance().hidePanel(this)}},e.prototype.getReward=function(t){if(a.default.GetInstance().user.sign.day<6){var e=this.signType[a.default.GetInstance().user.sign.day];0==e[0]?a.default.GetInstance().addBackProp(e[1]*t):a.default.GetInstance().addAddProp(e[1]*t)}else a.default.GetInstance().addAddProp(5*t),a.default.GetInstance().addBackProp(5*t)},e}(t("../sdk/Panel").default);n.default=l,cc._RF.pop()},{"../AdSdk/AdSdk":"AdSdk","../Confg/Lanuage":"Lanuage","../Confg/UserMgr":"UserMgr","../sdk/CSdk":"CSdk","../sdk/Panel":"Panel"}],SoundMgr:[function(t,e,n){"use strict";cc._RF.push(e,"bd631xXqMlIIZ7Y2zkj4NA2","SoundMgr"),Object.defineProperty(n,"__esModule",{value:!0}),n.SoundMgr=n.SoundType=void 0;var o,i=t("./UserMgr");(function(t){t.BG="bg",t.BOOM="boom",t.Water="water",t.WIN="win",t.CLICK="click",t.COMP="comp",t.FAIL="fail",t.FENGCHE="fengche",t.COLLIDER="collider",t.WINDOW="panel",t.UPGRADE="upgrade"})(o=n.SoundType||(n.SoundType={}));var s=function(){function t(){this.isPlaying=!1,this.url="res/sound/",this.remote="",this.effectPool=[],this.isPlayings=!1,this.url=this.remote+this.url}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.playMusic=function(t){cc.audioEngine.playMusic(this.effectPool[t],!0)},t.prototype.playSound=function(t){i.default.GetInstance().audio.music<=0||cc.audioEngine.playEffect(this.effectPool[t],!1)},t.prototype.setSoundVolume=function(t){cc.audioEngine.setMusicVolume(t)},t.prototype.playUpgrade=function(){var t=this;this.isPlayings||(this.isPlayings=!0,cc.audioEngine.setEffectsVolume(.7),cc.audioEngine.playEffect(this.effectPool[o.UPGRADE],!1),setTimeout(function(){t.isPlayings=!1},2e3))},t.prototype.stopChange=function(){},t.prototype.setMusicVolume=function(t){cc.audioEngine.setEffectsVolume(t)},t._instance=null,t}();n.SoundMgr=s,cc._RF.pop()},{"./UserMgr":"UserMgr"}],UserMgr:[function(t,e,n){"use strict";cc._RF.push(e,"075c6Xs5w1LbIh5QiliHeVH","UserMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../AdSdk/AdSdk"),i=function(){function t(){this.user={power:10,maxPower:10,level:1,userName:"",sign:{day:0,isSigned:!1,signDate:""},backProp:0,addProp:0},this.audio={music:1,virbate:1}}return t.GetInstance=function(){return this.inst||(this.inst=new t),this.inst},t.prototype.init=function(){var t=cc.sys.localStorage.getItem("water_fgui");if(t)try{var e=JSON.parse(t);(new Date).getDate()+"-"+(new Date).getMonth()!=e.sign.signDate&&e.sign.isSigned&&(e.sign.day=(e.sign.day+1)%7,e.sign.isSigned=!1),this.user=e}catch(i){}else this.user.userName=this.getRandomName(),o.adSdk.setRank(),this.save();var n=cc.sys.localStorage.getItem("water_audio");if(n)try{this.audio=JSON.parse(n)}catch(i){}},t.prototype.setMusic=function(t){this.audio.music=t,this.saveAudio()},t.prototype.setVirbate=function(t){this.audio.virbate=t,this.saveAudio()},t.prototype.getRandomName=function(){var t=this.getRandomChar(10);return"User"+t},t.prototype.getRandomChar=function(t){t=t||10;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length,o="",i=0;i<t;i++)o+=e.charAt(Math.floor(Math.random()*n));return o},t.prototype.addLevel=function(){this.user.level+=1,this.save()},t.prototype.sign=function(){this.user.sign.signDate=(new Date).getDate()+"-"+(new Date).getMonth(),this.user.sign.isSigned=!0,this.save()},t.prototype.addBackProp=function(t){this.user.backProp+=t,this.save(),mvc.emit("PROP_UPDATE")},t.prototype.addAddProp=function(t){this.user.addProp+=t,this.save(),mvc.emit("PROP_UPDATE")},t.prototype.addPower=function(t){t<0&&this.user.level<=5||(this.user.power+=t,this.save(),mvc.emit("POWER_UPDATE"))},t.prototype.save=function(){cc.sys.localStorage.setItem("water_fgui",JSON.stringify(this.user))},t.prototype.saveAudio=function(){cc.sys.localStorage.setItem("water_audio",JSON.stringify(this.audio))},t.inst=null,t}();n.default=i,cc._RF.pop()},{"../AdSdk/AdSdk":"AdSdk"}],WebSdk2:[function(t,e,n){"use strict";cc._RF.push(e,"c03733rxZ5GgY4TuM5WQZvF","WebSdk2"),Object.defineProperty(n,"__esModule",{value:!0}),n.WebSdk2=n.CallbackForAd=void 0,n.CallbackForAd={video:null};var o=function(){function t(){this.bpClick=!1,this.callback=null}return t.prototype.initConfig=function(){},t.prototype.showBlockAd=function(){},t.prototype.showVideoAd=function(t){this.callback=t,this.callback&&this.callback()},t.prototype.sendVideoOk=function(){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==t.readyState&&t.status>=200&&t.status<400){var e=t.responseText;console.log(e)}},t.open("GET","http://42.192.210.128:3309/game/video?channel=water_us",!0),t.send()},t.prototype.showGameBoxAd=function(){},t.prototype.loadGameBoxAd=function(){return null},t.prototype.showBannerAd=function(){},t.prototype.showInterAd=function(){},t.prototype.hideBlockAd=function(){},t.prototype.showWindow=function(){},t.prototype.hideBannerAd=function(){},t.prototype.refresh=function(){},t.prototype.showTalk=function(){},t}();n.WebSdk2=o,cc._RF.pop()},{}],WinPanel:[function(t,e,n){"use strict";cc._RF.push(e,"f8e0fAmBWxCQKgK0VscTnob","WinPanel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s=t("../AdSdk/AdSdk"),r=t("../Confg/GameConfig"),a=t("../Confg/Lanuage"),c=t("../Confg/SoundMgr"),l=t("../Confg/UserMgr"),u=t("../Scene/HomeScene"),d=t("../sdk/CSdk"),h=t("../sdk/Panel"),p=t("./PowerPanel"),f=function(t){function e(){var e=t.call(this,"Main","Win")||this;return e.isGet=!1,e.type=0,e.val=0,e.isPlaying=!1,e}return i(e,t),e.prototype.bindChild=function(){this.text_title=this.getText("n3"),this.btn_get=this.getButton("n5"),this.btn_double=this.getButton("n6"),this.btn_home=this.getButton("btn_home")},e.prototype.refreshUi=function(){c.SoundMgr.getInstance().playSound(c.SoundType.WIN),this.btn_double.enabled=!0,l.default.GetInstance().addLevel(),this.btn_get.title=a.default.GetInstance().getText("\u4e0b\u4e00\u5173"),this.btn_double.title=a.default.GetInstance().getText("\u53cc\u500d\u9886\u53d6"),this.getText("n3").text=a.default.GetInstance().getText("\u6e38\u620f\u80dc\u5229"),this.type=Math.floor(2*Math.random()),this.val=Math.floor(2*Math.random()+1),this.getText("n11").text="x"+this.val,0==this.type?l.default.GetInstance().addBackProp(this.val):l.default.GetInstance().addAddProp(this.val),s.adSdk.setRank(),s.adSdk.Platform.showBannerAd(),s.adSdk.Platform.showInterAd()},e.prototype.playNext=function(){},e.prototype.onClickButton=function(t){var e=this;switch(t){case this.btn_get:if(this.isPlaying)return;l.default.GetInstance().user.power<2?(s.adSdk.Platform.hideBannerAd(),d.default.GetInstance().hidePanel(this),d.default.GetInstance().showScene(u.default,"Home"),d.default.GetInstance().showPanel(p.default,"Power"),r.default.showToast("Not Power!")):(this.isPlaying=!0,l.default.GetInstance().user.level<=5?(this.isPlaying=!1,l.default.GetInstance().addPower(-2),s.adSdk.Platform.hideBannerAd(),d.default.GetInstance().hidePanel(this),r.default.cupMgr.nextLevel(),mvc.emit("LEVEL_UPDATE")):this.btn_get.getTransition("t0").play(function(){e.isPlaying=!1,l.default.GetInstance().addPower(-2),s.adSdk.Platform.hideBannerAd(),d.default.GetInstance().hidePanel(e),r.default.cupMgr.nextLevel(),mvc.emit("LEVEL_UPDATE")},1));break;case this.btn_double:if(this.isPlaying)return;s.adSdk.Platform.showVideoAd(function(){0==e.type?l.default.GetInstance().addBackProp(2*e.val):l.default.GetInstance().addAddProp(2*e.val),e.btn_double.enabled=!1},function(){});break;case this.btn_home:if(this.isPlaying)return;s.adSdk.Platform.hideBannerAd(),d.default.GetInstance().hidePanel(this),d.default.GetInstance().showScene(u.default,"Home")}},e}(h.default);n.default=f,cc._RF.pop()},{"../AdSdk/AdSdk":"AdSdk","../Confg/GameConfig":"GameConfig","../Confg/Lanuage":"Lanuage","../Confg/SoundMgr":"SoundMgr","../Confg/UserMgr":"UserMgr","../Scene/HomeScene":"HomeScene","../sdk/CSdk":"CSdk","../sdk/Panel":"Panel","./PowerPanel":"PowerPanel"}],WySdk:[function(t,e,n){"use strict";cc._RF.push(e,"6b585oRSShJs5Ft6HzEN0l8","WySdk"),Object.defineProperty(n,"__esModule",{value:!0}),n.WySdk=n.CallbackForAd=void 0,n.CallbackForAd={video:null};var o=function(){function t(){this.bpClick=!1,this.callback=null}return t.prototype.initConfig=function(){},t.prototype.showBlockAd=function(){},t.prototype.openVolume=function(){},t.prototype.closeVolume=function(){},t.prototype.showVideoAd=function(t,e){var n=this;if(this.callback=t,console.log("ShowVIdeo.................."),this.closeVolume(),!window.MiniGameAds)return this.callback&&this.callback(),void this.openVolume();this.closeVolume(),window.MiniGameAds.isRewardvideoReady()?MiniGameAds.showRewardedVideo().then(function(){console.info("\u65b0\u63a5\u53e3\u64ad\u653e\u6fc0\u52b1\u5e7f\u544a: \u6210\u529f"),n.openVolume(),t&&t()}).catch(function(t){e&&e(),n.openVolume(),console.error("\u65b0\u63a5\u53e3\u64ad\u653e\u6fc0\u52b1\u5e7f\u544a: \u5931\u8d25\uff0c\u539f\u56e0: "+t.message)}):(e&&e(),this.openVolume(),console.info("\u6fc0\u52b1\u89c6\u9891\u6ca1\u6709\u52a0\u8f7d\u6210\u529f\uff0c\u65e0\u6cd5\u64ad\u653e"))},t.prototype.sendVideoOk=function(){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==t.readyState&&t.status>=200&&t.status<400){var e=t.responseText;console.log(e)}},t.open("GET","http://42.192.210.128:3309/game/video?channel=water_us",!0),t.send()},t.prototype.showGameBoxAd=function(){},t.prototype.loadGameBoxAd=function(){return null},t.prototype.showBannerAd=function(){window.MiniGameAds&&(MiniGameAds.isBannerReady()?MinigameAds.showBanner().then(function(){console.info("\u65b0\u63a5\u53e3\u64ad\u653e\u6a2a\u5e45\u5e7f\u544a: \u6210\u529f"),window.xmgame.isShowBanner=!0}).catch(function(t){console.error("\u65b0\u63a5\u53e3\u64ad\u653e\u6a2a\u5e45\u5e7f\u544a: \u5931\u8d25\uff0c\u539f\u56e0: "+t.message)}):console.info("\u6a2a\u5e45\u5e7f\u544a\u6ca1\u6709\u52a0\u8f7d\u6210\u529f\uff0c\u65e0\u6cd5\u64ad\u653e"))},t.prototype.showInterAd=function(){window.MiniGameAds&&(MiniGameAds.isInterstitialReady()?MiniGameAds.showInterstitial().then(function(){console.info("\u65b0\u63a5\u53e3\u64ad\u653e\u63d2\u5c4f\u5e7f\u544a: \u6210\u529f")}).catch(function(t){console.error("\u65b0\u63a5\u53e3\u64ad\u653e\u63d2\u5c4f\u5e7f\u544a: \u5931\u8d25\uff0c\u539f\u56e0: "+t.message)}):console.info("\u63d2\u5c4f\u5e7f\u544a\u6ca1\u6709\u52a0\u8f7d\u6210\u529f\uff0c\u65e0\u6cd5\u64ad\u653e"))},t.prototype.hideBlockAd=function(){},t.prototype.showWindow=function(){},t.prototype.hideBannerAd=function(){window.MiniGameAds&&MiniGameAds.hideBanner().then(function(){console.info("\u65b0\u63a5\u53e3\u9690\u85cf\u6fc0\u52b1\u5e7f\u544a: \u6210\u529f")}).catch(function(t){console.error("\u65b0\u63a5\u53e3\u9690\u85cf\u6fc0\u52b1\u5e7f\u544a: \u5931\u8d25\uff0c\u539f\u56e0: "+t.message)})},t.prototype.refresh=function(){},t.prototype.showTalk=function(){},t}();n.WySdk=o,cc._RF.pop()},{}],WyySdk:[function(t,e,n){"use strict";cc._RF.push(e,"cdd2d5IEztPxa1kT1puce+U","WyySdk"),Object.defineProperty(n,"__esModule",{value:!0}),n.WyySdk=n.CallbackForAd=void 0;var o=t("../Confg/GameConfig"),i=t("./AdSdk");n.CallbackForAd={video:null};var s=function(){function t(){this.bpClick=!1,this.callback=null}return t.prototype.initConfig=function(){var t=this;window.yyygame&&window.yyygame.on("motivationalVideo",function(e){var n=e||{},s=n.success;n.id,s?(t.callback&&t.callback(),i.adSdk.sendVideoOk()):o.default.showToast("\u5e7f\u544a\u64ad\u653e\u5931\u8d25!"),t.callback=null})},t.prototype.showBlockAd=function(){},t.prototype.showVideoAd=function(t){this.callback=t,window.yyygame?window.yyygame.adSupport({appId:"a30102000000000001bf763a39211dac"}).then(function(t){!0===(null==t?void 0:t.success)?window.yyygame.ad({type:"motivational-video",direction:1,typeIds:["300001_0"],success:function(t){null==t||t.success},fail:function(){o.default.showToast("\u6682\u65e0\u5e7f\u544a!")}}):o.default.showToast("\u6682\u4e0d\u652f\u6301\u5e7f\u544a!")}):this.callback&&this.callback()},t.prototype.sendVideoOk=function(){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==t.readyState&&t.status>=200&&t.status<400){var e=t.responseText;console.log(e)}},t.open("GET","http://42.192.210.128:3309/game/video?channel=water_wyy",!0),t.send()},t.prototype.showGameBoxAd=function(){},t.prototype.loadGameBoxAd=function(){return null},t.prototype.showBannerAd=function(){},t.prototype.showInterAd=function(){},t.prototype.hideBlockAd=function(){},t.prototype.showWindow=function(){},t.prototype.hideBannerAd=function(){},t.prototype.refresh=function(){},t.prototype.showTalk=function(){},t}();n.WyySdk=s,cc._RF.pop()},{"../Confg/GameConfig":"GameConfig","./AdSdk":"AdSdk"}],cupMgr:[function(t,e,n){"use strict";cc._RF.push(e,"21094+adpxIR6Jz95ctGylK","cupMgr");var o,i,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{c(o.next(t))}catch(e){s(e)}}function a(t){try{c(o.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,a)}c((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(t){return function(e){return c([t,e])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.CupMgr=void 0;var l=t("../../Scripts/Confg/UserMgr"),u=t("../Confg/GameConfig"),d=t("./cup"),h=t("./waterFlow"),p=cc._decorator,f=p.ccclass,g=p.property,y=p.executeInEditMode,_=((i={})[1]=[0,1],i[2]=[80,1],i[3]=[50,1],i[4]=[40,.9],i[5]=[30,.8],i[6]=[30,.65],i[7]=[20,.6,60],i[8]=[10,.55,80],i),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelCfg=null,e.pfb1=null,e.pfb2=null,e._level=1,e.curCfg=[],e._waterFlow=null,e.isComplete=!0,e.isAddCup=!1,e.pfb=null,e._debugLevel=0,e._cups=[],e.layout_v=null,e.selected=null,e.pourQueue=[],e.toCup=null,e._actions=[],e}return s(e,t),e.prototype.onLoad=function(){},e.prototype.onInit=function(){this.pfb=window.adSdk.platformApk?this.pfb2:this.pfb1,this.pourQueue=[];var t=this._waterFlow;t&&t.clear(),this._level=l.default.GetInstance().user.level,this.initCfg(),this.createCups();var e=new cc.Node;e.parent=this.node,this._waterFlow=e.addComponent(h.WaterFlow)},e.prototype.initCfg=function(){this.curCfg=[];for(var t=this.levelCfg.json[this._level-1],e=0;e<t.length;){var n={colorIds:[t[e],t[e+1]||0,t[e+2]||0,t[e+3]||0]};this.curCfg.push(n),e+=4}},Object.defineProperty(e.prototype,"debugLevel",{get:function(){return this._debugLevel},set:function(t){this._debugLevel=t,this._level=t,this.nextLevel()},enumerable:!1,configurable:!0}),e.prototype.showFinger=function(t){for(var e=0;e<this._cups.length;e++)this._cups[e].node.getChildByName("18").active=!1;t>=this._cups.length||(this._cups[t].node.getChildByName("18").active=!0)},e.prototype.gotoNext=function(t){t==this._cups[u.default.cupIndex]&&(u.default.step++,mvc.emit("UPDATE_NEXT"))},e.prototype.createCups=function(){return a(this,void 0,void 0,function(){function t(t,e,n){var o=new cc.Node(n);o.parent=e;var i=o.addComponent(cc.Layout);return i.type=t,i.resizeMode=cc.Layout.ResizeMode.CONTAINER,i}var e,n,o,i,s,r,a,l,u,h,p,f,g,y,v,w,m,b,k,C,S,P;return c(this,function(){if(this.isAddCup=!1,this.isComplete=!0,this.layout_v&&this.layout_v.node.destroyAllChildren(),this._cups=[],this.selected=null,this._actions=[],e=this.curCfg,0==(n=this.curCfg.length))return[2];for(p=0;p<n;p++)o=e[p],(i=cc.instantiate(this.pfb)).parent=this.node,(s=i.getComponent(d.default)).setCupInfo(o,this.onClickCup.bind(this)),this._cups.push(s);if(null==this.layout_v&&(this.layout_v=t(cc.Layout.Type.VERTICAL,this.node,"layout_v"),this.layout_v.node.zIndex=1),r=this._cups[0].node.getContentSize(),a=[],n<=4){for(g=[],p=0;p<this._cups.length;p++)g.push(p);a.push(g)}else if(n<=15){for(g=[],p=0,l=n/2;p<l;p++)g.push(p);for(a.push(g),g=[];p<n;p++)g.push(p);a.push(g),g=[]}for(u=[],h=1,p=0;p<a.length;p++){for((f=t(cc.Layout.Type.HORIZONTAL,this.layout_v.node,"layout_h_"+p)).node.height=r.height,g=a[p],y=0;y<g.length;y++)v=g[y],this._cups[v].node.parent=f.node;h=Math.max(h,f.node.childrenCount),(w=_[h][0])!=f.spacingX&&(f.spacingX=w),u.push(f)}for(this.layout_v.enabled=!0,this.layout_v.node.scale=_[h][1]*(window.adSdk.platformApk?.7:1),this.layout_v.spacingY=_[h][2]||30,m=0,b=u;m<b.length;m++)(k=b[m]).updateLayout(),k.enabled=!1;for(this.layout_v.updateLayout(),this.layout_v.enabled=!1,C=0,S=this._cups;C<S.length;C++)(P=S[C]).orignPt=P.node.position;return[2]})})},e.prototype.addEmptyCup=function(){if(!this.isAddCup){this.layout_v&&this.layout_v.node.destroyAllChildren(),this.isAddCup=!0;var t=cc.instantiate(this.pfb);t.parent=this.node;var e=t.getComponent(d.default);e.setCupInfo({colorIds:[0,0,0,0]},this.onClickCup.bind(this)),this._cups.push(e);var n=this.curCfg.length+1,o=this._cups[0].node.getContentSize(),i=[];if(n<=4){for(var s=[],r=0;r<this._cups.length;r++)s.push(r);i.push(s)}else if(n<=15){s=[],r=0;for(var a=n/2;r<a;r++)s.push(r);for(i.push(s),s=[];r<n;r++)s.push(r);i.push(s),s=[]}var c=[],l=1;for(r=0;r<i.length;r++){var u=k(cc.Layout.Type.HORIZONTAL,this.layout_v.node,"layout_h_"+r);u.node.height=o.height,s=i[r];for(var h=0;h<s.length;h++){var p=s[h];this._cups[p].node.parent=u.node}l=Math.max(l,u.node.childrenCount);var f=_[l][0];f!=u.spacingX&&(u.spacingX=f),c.push(u)}this.layout_v.enabled=!0,this.layout_v.node.scale=_[l][1],this.layout_v.spacingY=_[l][2]||30;for(var g=0,y=c;g<y.length;g++){var v=y[g];v.updateLayout(),v.enabled=!1}this.layout_v.updateLayout(),this.layout_v.enabled=!1;for(var w=0,m=this._cups;w<m.length;w++){var b=m[w];b.orignPt=b.node.position}}function k(t,e,n){var o=new cc.Node(n);o.parent=e;var i=o.addComponent(cc.Layout);return i.type=t,i.resizeMode=cc.Layout.ResizeMode.CONTAINER,i}},e.prototype.getIndexByCup=function(t){return this._cups.indexOf(t)},e.prototype.onClickCup=function(t){if(window.SoundMgr_v.playSound("click"),(this.selected||!t.checkIsFinshed())&&(this.isComplete||!(l.default.GetInstance().user.level<=2))){var e=l.default.GetInstance().user.level;if(1==e){if(0==u.default.step){if(0==this.getIndexByCup(t))return}else if(1==this.getIndexByCup(t))return}else if(2==e&&[[1,2],[0,2],[1,2],[0,1]][u.default.step].indexOf(this.getIndexByCup(t))>-1)return;this.selected?this.selected==t?(this.doSelect(t,!1),this.selected=null):this.checkPour(this.selected,t)?this.startPour(this.selected,t):(this.doSelect(this.selected,!1),this.selected=null):this.addImmediately(t)&&(this.selected=t,this.doSelect(t,!0))}},e.prototype.isWaterOk=function(){return this.pourQueue.length<=0},e.prototype.addImmediately=function(t){return!(this.pourQueue.filter(function(e){return e.dst==t}).length>0)},e.prototype.checkPour=function(t,e){var n=t.getTop(),o=e.getTop();return n.topColorId!=o.topColorId&&0!=o.topColorId?(window.GameConfig_v.showToast("\u989c\u8272\u76f8\u540c\u624d\u80fd\u5012\u5165"),!1):0!=n.topColorId&&(0==o.topColorId||n.topColorNum<=o.emptyNum||(window.GameConfig_v.showToast("\u6c34\u676f\u5df2\u7ecf\u6ee1\u4e86"),!1))},e.prototype.startPour=function(t,e){window.SoundMgr_v.playSound("water"),this.isComplete=!1,e.node.zIndex=0,e.node.parent.zIndex=0,t.node.zIndex=10,t.node.parent.zIndex=10;var n=t.getTop(),o=cc.v2(e.node.position),i=e.node.parent.convertToWorldSpaceAR(o),s=cc.view.getVisibleSize(),r=i.x>.5*s.width;Math.abs(i.x-.5*s.width)<2&&(r=t.node.parent.convertToWorldSpaceAR(cc.v2(t.node.position)).x<.5*s.width),o.y+=60+.5*e.node.height,o.x=o.x+(r?-0:0),o=e.node.parent.convertToWorldSpaceAR(o),t.setPourAnchor(r),o=t.node.parent.convertToNodeSpaceAR(o),this.pourQueue.push({topColorId:n.topColorId,topColorNum:n.topColorNum,src:t,dst:e});var a=this._waterFlow;a.setLineScale(this.layout_v.node.scale),this.selected=null,t.moveToPour(o,r,function(){var o=t.node.convertToWorldSpaceAR(cc.v2());window.adSdk.platformApk,o=a.node.parent.convertToNodeSpaceAR(o);var i=cc.v2(o.x,e.getWaterSurfacePosY());(i=a.node.parent.convertToNodeSpaceAR(i)).x=o.x,a.strokeColor=(new cc.Color).fromHEX(n.colorHex),a.playFlowAni(o,i,.2,!1,function(){e.startAddWater(n.topColorId,n.topColorNum,function(){})})}.bind(this),function(){var o=this;this.onPourOneFinished(t,e,n.topColorId,n.topColorNum);var i=t.node.convertToWorldSpaceAR(cc.v2());i=a.node.parent.convertToNodeSpaceAR(i);var s=cc.v2(i.x,e.getWaterSurfacePosY(!0));(s=a.node.parent.convertToNodeSpaceAR(s)).x=i.x,a.playFlowAni(i,s,.2,!0,function(){a.clear()}),this.isComplete=!0,t.setNormalAnchor();var r=t.orignPt;cc.tween(t.node).delay(.7).to(.5,{x:r.x,y:r.y,angle:0},{easing:"sineOut"}).call(function(){t.node.zIndex=0,t.node.parent.zIndex=0,2==l.default.GetInstance().user.level&&o.gotoNext(o.toCup)}).start()}.bind(this))},e.prototype.doSelect=function(t,e){this.gotoNext(t);var n=t.orignPt.y+(e?.2*t.node.height:0);cc.tween(t.node).stop(),cc.tween(t.node).to(.2,{y:n}).start()},e.prototype.onPourOneFinished=function(t,e,n,o){var i=this.pourQueue.filter(function(i){return i.src==t&&i.dst==e&&i.topColorId==n&&i.topColorNum==o});i.length>0&&this.pourQueue.splice(this.pourQueue.indexOf(i[0]),1),this.toCup=e;var s=this._cups.indexOf(t),r=this._cups.indexOf(e);5==this._actions.length&&this._actions.shift(),this._actions.push({from:s,to:r,colorId:n,num:o});var a=this.checkIsAllFinished();e.updateWater(),a?(this._level++,cc.sys.localStorage.setItem("level",this._level),this.node.emit("level_finish")):this.node.emit("do_pour"),cc.sys.localStorage.setItem("last_cfg",JSON.stringify(this.curCfg)),cc.sys.localStorage.setItem("action_history",JSON.stringify(this._actions))},e.prototype.getActionNum=function(){return this._actions.length},e.prototype.undoAction=function(){if(this._actions.length<=0)return!1;var t=this._actions.pop();if(null==t)return!1;var e=t.from,n=t.to,o=t.num,i=t.colorId,s=this._cups[n],r=this._cups[e];return!s.isPouring()&&!r.isPouring()&&(s.removeTopWaterImmediately(o),r.addWaterImmediately(i,o),!0)},e.prototype.nextLevel=function(){this._level=l.default.GetInstance().user.level,this.initCfg(),this.createCups()},e.prototype.getLevel=function(){return this._level},e.prototype.checkIsAllFinished=function(){for(var t=0,e=this._cups;t<e.length;t++)if(!e[t].checkIsFinshed())return!1;return!0},r([g(cc.JsonAsset)],e.prototype,"levelCfg",void 0),r([g(cc.Prefab)],e.prototype,"pfb1",void 0),r([g(cc.Prefab)],e.prototype,"pfb2",void 0),r([g],e.prototype,"_debugLevel",void 0),r([g({tooltip:!1})],e.prototype,"debugLevel",null),r([f,y],e)}(cc.Component);n.CupMgr=v,cc._RF.pop()},{"../../Scripts/Confg/UserMgr":"UserMgr","../Confg/GameConfig":"GameConfig","./cup":"cup","./waterFlow":"waterFlow"}],cup:[function(t,e,n){"use strict";cc._RF.push(e,"571acidLCpI/o4Yq1/Lt6QN","cup");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.WaterColors=void 0;var r=t("./water"),a=cc._decorator,c=a.ccclass,l=a.property;n.WaterColors=["#155DEF","#F2C90F","#BD2656","#F0791F","#454574","#FE2D26","#BCA6E3","#E4584F","#00B38A","#DD2E44","#E5C69A","#65DC8E","#B068F0","#F010BF","#538849"];var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.water=null,e.onClick=null,e.info=null,e.isPlay=!1,e.tween=null,e.dot=null,e}return i(e,t),e.prototype.onBtn_click=function(){this.isPouring()||this.onClick&&this.onClick(this)},e.prototype.isPouring=function(){return Math.abs(this.node.angle)>1},e.prototype.initWater=function(){for(var t=this.info,e=[],o=3;o>=0;o--){var i=t.colorIds[o];if(0!=i){var s=e[e.length-1];s&&s==i?s.height+=.25:e.push({height:.25,colorId:i})}}e.forEach(function(t){var e=n.WaterColors[t.colorId]||"#538849";t.color=(new cc.Color).fromHEX(e),t.height*=.8}),this.water.initInfos(e)},e.prototype.updateWater=function(){for(var t=this.info.colorIds[this.info.colorIds.length-1],e=this.info.colorIds.length-1;e>=0&&0!=this.info.colorIds[e]&&this.info.colorIds[e]==t;e--)0;this.water.infos.length,this.water.updateAngleHeight()},e.prototype.setCupInfo=function(t,e){this.info=t,this.onClick=e,this.initWater(),this.reset()},e.prototype.update=function(){this.water.skewAngle!=this.node.angle&&(this.water.skewAngle=this.node.angle)},e.prototype.setPourOutCallback=function(t,e){this.water.setPourOutCallback(function(){t&&t(this)}.bind(this),function(){this.tween&&(this.tween.stop(),this.tween=null),e&&e(this)}.bind(this))},e.prototype.setPourInCallback=function(t){this.water.setPourInCallback(function(){var e=this.checkIsFinshed();t&&t(this,e)}.bind(this))},e.prototype.isPlayed=function(){this.isPlay||(this.isPlay=!0,this.node.getChildByName("effect").getComponent(cc.ParticleSystem).resetSystem())},e.prototype.checkIsFinshed=function(){for(var t=!0,e=this.info.colorIds,n=null,o=0,i=0;i<4;i++){if(null==n&&(n=e[i]),n!=e[i]){t=!1;break}0==e[i]&&o++}return 4==o&&(t=!0),t&&0!=e[0]&&this.isPlayed(),t},e.prototype.moveToPour=function(t,e,n,o){var i=this;this.setPourOutCallback(n,o);var s=this.water.getPourStartAngle(),r=this.water.getPourEndAngle();this.water.onStartPour(),e&&(s*=-1,r*=-1),this.tween=cc.tween(this.node).set({angle:0}).to(.5,{x:t.x,y:t.y,angle:s}).to(.8,{angle:r}).call(function(){i.tween=null}).start();for(var a=this.getTop(),c=this.info.colorIds,l=0;l<4;l++){var u=c[l];if(0!=u){if(a.topColorId!=u)break;c[l]=0}}},e.prototype.startAddWater=function(t,e,o){this.setPourInCallback(o);for(var i=0,s=3;s>=0&&(0!=this.info.colorIds[s]||(this.info.colorIds[s]=t,++i!=e));s--);var r=n.WaterColors[t]||"#538849";this.water.addInfo({colorId:t,height:e/4*.8,color:(new cc.Color).fromHEX(r)},this)},e.prototype.addWaterImmediately=function(t,e){for(var n=0,o=3;o>=0&&(0!=this.info.colorIds[o]||(this.info.colorIds[o]=t,++n!=e));o--);this.initWater()},e.prototype.removeTopWaterImmediately=function(t){for(var e=0,n=this.getTop(),o=this.info.colorIds,i=0;i<4;i++){var s=o[i];if(0!=s){if(n.topColorId!=s)break;if(o[i]=0,++e>=t)break}}return this.initWater(),n},e.prototype.getTop=function(){for(var t=this.info.colorIds,e=0,o=0,i=0,s=0;s<4;s++)if(0!=t[s]){if(0!=o&&o!=t[s])break;o=t[s],i++}else e++;return{emptyNum:e,topColorId:o,topColorNum:i,colorHex:n.WaterColors[o]||"#538849"}},e.prototype.reset=function(){this.node.angle=0,this.water.skewAngle=0},e.prototype.setPourAnchor=function(t){var e=cc.v2(3,2);e.x=t?this.node.width-e.x:e.x,e.y=this.node.height-e.y,e.x=e.x/this.node.width,e.y=e.y/this.node.height,this.setAnchor(e)},e.prototype.setNormalAnchor=function(){this.setAnchor(cc.v2(.5,.5))},e.prototype.setAnchor=function(t){var e=this.node.getAnchorPoint(),n=this.node.getPosition(),o=this.water.node.getPosition();this.node.setAnchorPoint(t);var i,s,r,a,c=cc.v2(t.x-e.x,t.y-e.y),l=cc.v2(c.x*this.node.width,c.y*this.node.height);i=l,s=this.node.angle,r=d(s),(a=cc.v2()).x=i.x*Math.cos(r)-i.y*Math.sin(r),a.y=i.x*Math.sin(r)+i.y*Math.cos(r),l=a,n.x+=l.x,n.y+=l.y,this.node.setPosition(n),o.x-=c.x*this.node.width,o.y-=c.y*this.node.height,this.water.node.setPosition(o)},e.prototype.getWaterSurfacePosY=function(t){void 0===t&&(t=!1);var e=(4-this.getTop().emptyNum)/4;e<.02?e=.02:t&&(e-=.2),e*=.8,e-=.5;var n=cc.v2(0,this.water.node.height*e);return(n=this.water.node.convertToWorldSpaceAR(n)).y},s([l(r.default)],e.prototype,"water",void 0),s([c],e)}(cc.Component);function d(t){for(;t>360;)t-=360;for(;t<-360;)t+=360;return t%360*Math.PI/180}n.default=u,cc._RF.pop()},{"./water":"water"}],main:[function(t,e,n){"use strict";cc._RF.push(e,"6df48O4+0hAmZRYwBxlEQFg","main");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./Confg/GameConfig"),a=t("./Confg/SoundMgr"),c=t("./Confg/UserMgr"),l=t("./Fgui"),u=t("./scripts/cupMgr"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cupMgr=null,e.audio=[],e}return i(e,t),e.prototype.start=function(){l.default.GetInstance().init(),c.default.GetInstance().init(),r.default.cupMgr=this.cupMgr;for(var t=["click","water","win"],e=0;e<this.audio.length;e++)a.SoundMgr.getInstance().effectPool[t[e]]=this.audio[e]},s([p(u.CupMgr)],e.prototype,"cupMgr",void 0),s([p([cc.AudioClip])],e.prototype,"audio",void 0),s([h],e)}(cc.Component);n.default=f,cc._RF.pop()},{"./Confg/GameConfig":"GameConfig","./Confg/SoundMgr":"SoundMgr","./Confg/UserMgr":"UserMgr","./Fgui":"Fgui","./scripts/cupMgr":"cupMgr"}],waterFlow:[function(t,e,n){"use strict";cc._RF.push(e,"a622e7gyxZKvKrjJq/BWUi4","waterFlow");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.WaterFlow=void 0;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._toPt=cc.v2(),e.from=cc.v2(),e}return i(e,t),e.prototype.onLoad=function(){this.lineWidth=6,this.lineCap=cc.Graphics.LineCap.ROUND},Object.defineProperty(e.prototype,"toPt",{get:function(){return this._toPt},set:function(t){this._toPt=t,this.clear(),this.moveTo(this.from.x,this.from.y),this.lineTo(this._toPt.x,this._toPt.y),this.stroke()},enumerable:!1,configurable:!0}),e.prototype.playFlowAni=function(t,e,n,o,i){this.clear(),this.from=o?e:t,this.moveTo(this.from.x,this.from.y),cc.tween(this).set({toPt:t}).to(n,{toPt:e}).call(i).start()},e.prototype.setLineScale=function(t){this.lineWidth=6*t},e}(cc.Graphics);n.WaterFlow=s,cc._RF.pop()},{}],water:[function(t,e,n){"use strict";cc._RF.push(e,"62508r/XTlMvoYhvPHpusiq","water");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],r=0,a=s.length;r<a;r++,i++)o[i]=s[r];return o};Object.defineProperty(n,"__esModule",{value:!0});var a,c=cc._decorator,l=c.ccclass,u=c.property,d=c.requireComponent,h=c.executeInEditMode,p=c.disallowMultiple,f=c.executionOrder;(function(t){t[t.none=0]="none",t[t.in=1]="in",t[t.out=2]="out"})(a||(a={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._action=a.none,e.infos=[],e.stopIdx=-1,e.curIdx=0,e._ratio=1,e.effect=null,e._skewAngle=0,e.material=null,e.addHeight=0,e.totalHeight=0,e.onOutStart=null,e.onOutFinish=null,e.onInFInish=null,e.dot=null,e}return i(e,t),Object.defineProperty(e.prototype,"skewAngle",{get:function(){return this._skewAngle},set:function(t){t=Math.round(100*t)/100,this._skewAngle=t,this.updateAngleHeight()},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this.node.getComponent(cc.Sprite);t.spriteFrame&&(t.spriteFrame.getTexture().packable=!1),this.effect&&(this.material=cc.Material.create(this.effect),t.setMaterial(0,this.material)),this.material=t.getMaterial(0),this._ratio=this.node.height/this.node.width},e.prototype.initInfos=function(t){this.infos=t,this.curIdx=this.infos.length-1,this.initSizeColor(),this.updateAngleHeight()},e.prototype.addInfo=function(t,e){for(var n=0,o=0;o<e.info.colorIds.length;o++)0!=e.info.colorIds[o]&&n++;this.totalHeight=n/4*.8;var i=r(this.infos),s=0;for(o=0;o<i.length;o++)s+=i[o].height;console.log("xxx:",this.totalHeight,"@xxxyyy@",s),this.addHeight=this.totalHeight-s,t.height=0,this.infos.push(t),this._action=a.in,this.curIdx=this.infos.length-1,this.initSizeColor()},e.prototype.setPourOutCallback=function(t,e){this.onOutStart=t,this.onOutFinish=e},e.prototype.setPourInCallback=function(t){this.onInFInish=t},e.prototype.getPourStartAngle=function(){for(var t=0,e=0;e<=this.curIdx;e++)t+=this.infos[e].height;return this.getCriticalAngleWithHeight(t)},e.prototype.getPourEndAngle=function(){this.stopIdx=this.curIdx-this.getTopSameColorNum();for(var t=0,e=0;e<=this.stopIdx;e++)t+=this.infos[e].height;return this.getCriticalAngleWithHeight(t)},e.prototype.getCriticalAngleWithHeight=function(t){var e=0;if(0==t)return 90;if(t<.5){var n=this._ratio/(2*t);e=Math.atan(n)}else n=2*this._ratio*(1-t),e=Math.atan(n);return e/Math.PI*180},e.prototype.getTopSameColorNum=function(){for(var t=0,e=null,n=this.curIdx;n>=0;n--)if(null==e)t++,e=this.infos[n].colorId;else{if(this.infos[n].colorId!=e)break;t++}return t},e.prototype.onStartPour=function(){this._action=a.out,this.stopIdx=this.curIdx-this.getTopSameColorNum()},e.prototype.update=function(){this._action==a.out?this.pourStep():this._action==a.in&&this.addStep()},e.prototype.addStep=function(){if(!(this.curIdx<0)){var t=this.infos[this.curIdx];t.height=Math.round(1e3*(t.height+.005))/1e3,t.height>=this.addHeight&&(t.height=this.addHeight,this._action=a.none,this.onInFInish&&(this.onInFInish(),this.onInFInish=null)),this.updateAngleHeight()}},e.prototype.pourStep=function(){if(this.curIdx<0)this._action=a.none;else{for(var t=0,e=0;e<=this.curIdx;e++)t+=this.infos[e].height;var n,o=this.skewAngle%360*Math.PI/180,i=Math.abs(Math.tan(o));n=t<.5?i>this._ratio/(2*t):i>2*this._ratio*(1-t);var s=this.infos[this.curIdx];(n||s.height<.05)&&(this.onOutStart&&(this.onOutStart(),this.onOutStart=null),s.height=Math.round(1e3*(s.height-.005))/1e3,s.height<.01&&(s.height=0,this.infos.pop(),this.curIdx--,this.curIdx==this.stopIdx&&(this.onOutFinish&&(this.onOutFinish(),this.onOutFinish=null),this._action=a.none)),this.updateAngleHeight())}},e.prototype.initSizeColor=function(){for(var t=new Float32Array(24),e=0;e<this.infos.length;e++){var n=this.infos[e].color;t[4*e]=n.r/255,t[4*e+1]=n.g/255,t[4*e+2]=n.b/255,t[4*e+3]=1}this.material.setProperty("colors",t),this.material.setProperty("iResolution",cc.v2(this.node.width,this.node.height)),this.material.setProperty("waveType",0)},e.prototype.updateAngleHeight=function(){for(var t=new Float32Array(24),e=0;e<this.infos.length;e++)t[4*e]=this.infos[e].height,t[4*e+1]=0,t[4*e+2]=0,t[4*e+3]=0;this.material.setProperty("heights",t),this.material.setProperty("skewAngle",this._skewAngle);var n=0;this._action==a.in?n=1:this._action==a.out&&(n=2),this.material.setProperty("waveType",n)},e.prototype.showDebugCenter=function(){if(null==this.dot){this.dot=new cc.Node,this.dot.parent=this.node;var t=this.dot.addComponent(cc.Label);t.string="\xb7",t.fontSize=60,this.dot.color=cc.Color.RED}for(var e=this.node.height/this.node.width,n=y(this.skewAngle),o=0,i=0;i<=this.curIdx;i++)o+=this.infos[i].height;var s=Math.sin(n)>=0,r=cc.v2(.5,1-o),a=Math.abs(Math.tan(n));o<=.5?(a>2*e*o&&(r.x=Math.sqrt(2*o/a*e)/2,r.y=1-Math.sqrt(2*o*a/e)/2,a>e/(2*o)&&(r.y=.5,r.x=o)),s||(r.x=1-r.x),Math.abs(r.x-.25)<.01&&(i=0)):(a>2*e*(1-o)&&(r.x=Math.sqrt(2*e*(1-o)/a)/2,r.y=Math.sqrt(2*e*(1-o)*a)/2/e,a>e/(2*(1-o))&&(r.y=.5,r.x=1-o)),s&&(r.x=1-r.x)),r.x=r.x-.5,r.y=.5-r.y;var c=cc.v3(r.x*this.node.width,r.y*this.node.height);this.dot.position=c},s([u(cc.EffectAsset)],e.prototype,"effect",void 0),s([u],e.prototype,"_skewAngle",void 0),s([u({tooltip:!1})],e.prototype,"skewAngle",null),s([l,d(cc.Sprite),h,p,f(-100)],e)}(cc.Component);function y(t){for(;t>360;)t-=360;for(;t<-360;)t+=360;return t%360*Math.PI/180}n.default=g,cc._RF.pop()},{}]},{},["AdSdk","BpSdk","GoogleSdk","IPlatform","WebSdk2","WySdk","WyySdk","GameConfig","Lanuage","SoundMgr","UserMgr","Fgui","PowerPanel","RankPanel","SetPanel","SignPanel","WinPanel","GameScene","HomeScene","LoadingScene","main","cup","cupMgr","water","waterFlow","CSdk","Panel","ResItem","ResMgr","Scene"]);